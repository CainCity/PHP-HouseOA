{include file="template/head" /}

<body>
<div class="wap-container">
  <article class="Hui-admin-content clearfix">
    <div class="panel">
      <div class="panel-body">
        <form class="form form-horizontal" id="form-edit" method="post">
          <input type="hidden" value="{$list.id}" id="id" name="id">
          <div id="tab-system" class="HuiTab">
            <div class="tabBar cl">
              <span>基本信息</span>
              <span>其它信息</span>
              <span>角色授权</span>
              <span>客户查询权限</span>
            </div>

            <div class="tabCon">
              <div class="row cl">
                <label class="form-label col-xs-12 col-sm-2"><span class="c-red">*</span>编号：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text" id="usercode" name="usercode" value="{$list.usercode}">
                </div>

                <label class="form-label col-xs-12 col-sm-2"><span class="c-red">*</span>状态：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <span class="select-box">
                    <select class="select" id="status" name="status">
                      <option value=2>在职</option>
                      <option value=1>离职</option>
                    </select>
                  </span>
                </div>
              </div>

              <div class="row cl">
                <label class="form-label col-xs-12 col-sm-2"><span class="c-red">*</span>登录账号：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text" id="username" name="username" value="{$list.username}">
                </div>

                <label class="form-label col-xs-12 col-sm-2"><span class="c-red">*</span>所属团队：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <span class="select-box">
                    <select id="teamId" name="teamid" class="select">
                      <option value="0"></option>
                      {voList name="bList" id="bl"}
                      <option value="{$bl.id}">{$bl.name}</option>
                      {/voList}
                    </select>
                  </span>
                </div>
              </div>

              <div class="row cl">
                <label class="form-label col-xs-12 col-sm-2"><span class="c-red">*</span>姓名：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text" id="nickname" name="nickname" value="{$list.nickname}">
                </div>

                <label class="form-label col-xs-12 col-sm-2"><span class="c-red">*</span>手机：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text" id="tel" name="tel" value="{$list.tel}">
                </div>
              </div>

              <div class="row cl">
                <label class="form-label col-xs-12 col-sm-2">入职日期：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text datetimepicker-input" id="intime" name="intime" value="{$list.intime}">
                </div>

                <label class="form-label col-xs-12 col-sm-2">离职日期：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text datetimepicker-input" id="outtime" name="outtime" value="{$list.outtime}">
                </div>
              </div>

              <div class="row cl">
                <label class="form-label col-xs-12 col-sm-2">描述：</label>
                <div class="formControls col-xs-12 col-sm-10">
                  <textarea class="textarea textarea-article" name="description" placeholder="100个字符以内">{$list.description}</textarea>
                </div>
              </div>
            </div>

            <div class="tabCon">
              <div class="row cl">
                <label class="form-label col-xs-12 col-sm-2">身份证：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text" id="idcard" name="idcard" value="{$list.idcard}">
                </div>

              </div>

              <div class="row cl">
                <label class="form-label col-xs-12 col-sm-2">生日：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text datetimepicker-input" id="birthday" name="birthday" value="{$list.birthday}">
                </div>

                <label class="form-label col-xs-12 col-sm-2">性别：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <span class="select-box">
                    <select class="select" id="sex" name="sex">
                      <option value="0">保密</option>
                      <option value="1">男</option>
                      <option value="2">女</option>
                    </select>
                  </span>
                </div>
              </div>

              <div class="row cl">
                <label class="form-label col-xs-12 col-sm-2">开户行：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text" id="bank" name="bank" value="{$list.bank}">
                </div>

                <label class="form-label col-xs-12 col-sm-2">开户账号：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text" id="bankaccount" name="bankaccount" value="{$list.bankaccount}">
                </div>
              </div>

              <div class="row cl">
                <label class="form-label col-xs-12 col-sm-2">开户人：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text" id="accountholder" name="accountholder" value="{$list.accountholder}">
                </div>

                <label class="form-label col-xs-12 col-sm-2">邮箱：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text" id="email" name="email" value="{$list.email}">
                </div>
              </div>

              <div class="row cl">
                <label class="form-label col-xs-12 col-sm-2">微信：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text" id="wechat" name="wechat" value="{$list.wechat}">
                </div>

                <label class="form-label col-xs-12 col-sm-2">QQ：</label>
                <div class="formControls col-xs-12 col-sm-4">
                  <input type="text" class="input-text" id="qq" name="qq" value="{$list.qq}">
                </div>
              </div>

              <div class="row cl">
                <label class="form-label col-xs-12 col-sm-2">备注：</label>
                <div class="formControls col-xs-12 col-sm-10">
                  <textarea class="textarea textarea-article" name="note" placeholder="100个字符以内">{$list.note}</textarea>
                </div>
              </div>
            </div>

            <div class="tabCon">
              <div class="row cl">
                <div class="formControls col-xs-12 col-sm-12">
                  {voList name="aList" id="al"}
                  <dl class="Hui-admin-permission-list">
                    <dd>
                      <label><input type="checkbox" name="{$al['id']}" {if condition="$al['isTrue'] == 2"}checked="checked"{/if}>{$al['roleName']}&nbsp;&nbsp;</label>
                    </dd>
                  </dl>
                  {/voList}
                </div>
              </div>
            </div>

            <div class="tabCon">
              <div class="row cl">
                <div class="formControls col-xs-12 col-sm-12">
                  {voList name="cList" id="cl"}
                  <dl class="Hui-admin-permission-list">
                    <dd>
                      <label><input type="checkbox" name="{$cl['id']}" {if condition="$cl['isTrue'] == 2"}checked="checked"{/if}>{$cl['name']}</label>
                    </dd>
                  </dl>
                  {/voList}
                </div>
              </div>
            </div>
          </div>

          <div class="row cl">
            <div class="col-xs-9 col-sm-10 col-xs-offset-3 col-sm-offset-2">
              <button type="submit" class="btn btn-primary radius"><i class="Hui-iconfont">&#xe632;</i> 保存</button>
              <button type="button" class="btn btn-default radius" onClick="layer_close();">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </article>
</div>

{include file="template/addjs" /}

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript">
  $(function() {
    initData();
    initBind();
  });

  function initData() {
    $('#status').val("{$list.status}");
    $('#teamId').val("{$list.teamid}");
    $('#sex').val("{$list.sex}");
  }

  function initBind() {
    $("#tab-system").Huitab();

    $("#form-edit").validate({
      rules: {
        usercode: {required: true, minlength: 2, maxlength: 10},
        username: {required: true, minlength: 2, maxlength: 16},
        nickname: {required: true, minlength: 2, maxlength: 16},
        tel: {required: true, isMobile: true},
      },
      onkeyup: false,
      focusCleanup: true,
      success: "valid",
      submitHandler: function (form) {
        //$(form).ajaxSubmit();
        layer.confirm('确认保存吗？', function (index) {
          $.ajax({
            "type": "post",
            "url": "UserEdit",
            "data": $('#form-edit').serialize(),
            "async": false,
            "success": function (result) {
              switch (result['code']) {
                case 1:
                  layer.msg(result['message'], {icon: 6, time: 2000});
                  break;
                case 2:
                  parent.Message(result['message']);
                  layer_close();
                  break;
              }
            }
          });
        });
      }
    });

    $(".textarea-article").Huitextarealength({
      minlength: 0,
      maxlength: 100
    });

    fromDatetimePicker('#birthday');
    fromDatetimePicker('#intime');
    fromDatetimePicker('#outtime');
  }
</script>
<!--/请在上方写此页面业务相关的脚本-->

{include file="template/footer" /}